{"number":982,"state":"open","title":"Strong certificate fails if user's stored cert hash is empty","body":"I think this qualifies as a bug.\r\n\r\nExpected Behavior:\r\n\r\n* Register a user via Ice, set email address and password\r\n* User attempts to log in with strong certificate matching stored email address, and bypasses password auth.\r\n\r\nActual behavior:\r\n\r\n* User attempts to log in and is prompted for a password, despite the strong certificate matching\r\n\r\nWorkaround:\r\n\r\nPopulate certHash in the DB via Ice, or use password auth to bootstrap the user, at which point strong certificates work as normal.\r\n\r\nCause:\r\n\r\nIn Server::authenticate(), \"if (bStrongCert)\" [1] is inside the block for \"if (!certhash.isEmpty())\" [2]. I'm not sure how to restructure it and I don't know if I'll have time to fix it, but I wanted it on my todo list for later.\r\n\r\n1) https://github.com/fwaggle/mumble/blob/814ae5e129de4add9345f1a6084a8432d7c831df/src/murmur/ServerDB.cpp#L853\r\n2) https://github.com/fwaggle/mumble/blob/814ae5e129de4add9345f1a6084a8432d7c831df/src/murmur/ServerDB.cpp#L845\n\n\n*This ticket has been migrated from sourceforge. It is thus missing some details like original creator etc.\nThe original is at https://sourceforge.net/p/mumble/bugs/982/ .*","user":{"login":"fwaggle"},"created_at":"2013-04-27T00:04:37.584Z","updated_at":"2013-05-11T15:14:50.581Z"}
